{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <link rel="stylesheet" href="{% static 'styles/profile.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="wrapper d-flex">
        <!-- Sidebar -->
        <aside class="sidebar bg-light">
            <div class="sidebar-header text-center py-4">
                <img src="{% static 'media/logo.jpg' %}" alt="Logo" class="sidebar-logo img-fluid rounded-circle" width="100">
            </div>
            <nav class="menu">
                <ul class="list-unstyled">
                    <li><a href="{% url 'home' %}" class="d-block py-2 px-3"><i class="fas fa-home me-2"></i>Home</a></li>
                    <li><a href="{% url 'community' %}" class="d-block py-2 px-3"><i class="fas fa-users me-2"></i>Community</a></li>
                    <li><a href="{% url 'savelist' %}" class="d-block py-2 px-3"><i class="fas fa-bookmark me-2"></i>Saved</a></li>
                    <li><a href="{% url 'profile' %}" class="d-block py-2 px-3"><i class="fas fa-user-circle me-2"></i>Profile</a></li>
                    <li><a href="#" class="d-block py-2 px-3"><i class="fas fa-envelope me-2"></i>Messages</a></li>
                    <li><a href="#" class="d-block py-2 px-3"><i class="fas fa-store me-2"></i>Store</a></li>
                </ul>
            </nav>
            <div class="sidebar-footer text-center mt-auto py-3">
                <p>Welcome, <strong>{{ user.username }}</strong></p>
                <form action="{% url 'logout' %}" method="post">
                    {% csrf_token %}
                    <button class="btn btn-danger btn-sm">Logout</button>
                </form>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content flex-grow-1 p-4">
            <!-- Header -->
            <header class="profile-header d-flex flex-column align-items-center text-center mb-4">
                <div class="profile-picture mb-3">
                    {% if user.profile.profile_picture %}
                        <img src="{{ user.profile.profile_picture.url }}" alt="Profile Picture" class="rounded-circle img-fluid" width="150" height="150">
                    {% else %}
                        <img src="{% static 'images/default-profile.png' %}" alt="Default Profile Picture" class="rounded-circle img-fluid" width="150" height="150">
                    {% endif %}
                </div>
                <div class="profile-info">
                    <h2 class="mb-1">{{ user.username }}</h2>
                    <p class="text-muted mb-1">@{{ user.username }}</p>
                    <a href="{% url 'profile_management' %}" class="btn btn-outline-primary btn-sm">Edit Profile</a>
                </div>
            </header>            

            <!-- Search Bar -->
            <div class="search-bar mb-4">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search...">
                    <button class="btn btn-outline-secondary"><i class="fas fa-search"></i></button>
                </div>
            </div>

            <!-- Main Section -->
            <div class="main-section">
                <div class="row">
                    <!-- Posts -->
                    <div class="col-lg-8">
                        {% for post in posts %}
                        <div class="post mb-4 p-3 border rounded">
                            <div class="post-header mb-2">
                                <strong>{{ post.user.user.username }}</strong> <small class="text-muted">1 hr ago</small>
                            </div>
                            <p>{{ post.content }}</p>
                            {% if post.image %}
                                <img src="{{ post.image.url }}" alt="Post Image" class="img-fluid rounded">
                            {% elif post.video %}
                                <video src="{{ post.video.url }}" controls class="w-100 rounded"></video>
                            {% endif %}
                            <div class="actions mt-3 d-flex gap-2">
                                <button class="btn btn-sm btn-outline-primary"><i class="fas fa-thumbs-up me-1"></i> Like</button>
                                <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-bookmark me-1"></i> Save</button>
                            </div>
                        </div>
                        {% empty %}
                        <p class="text-muted">No posts yet.</p>
                        {% endfor %}
                    </div>

                    <!-- Trending Section -->
                    <div class="col-lg-4">
                        <div class="trending-section bg-light p-3 rounded">
                            <h5>Trending</h5>
                            <ul class="list-unstyled">
                                <li># Moisturizer</li>
                                <li># Skincare</li>
                                <li># Makeup</li>
                                <li># Lipstick</li>
                                <li># Vitamin C</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>